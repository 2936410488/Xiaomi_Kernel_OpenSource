// SPDX-License-Identifier: (GPL-2.0 OR MIT)
/*
 * Copyright (C) 2021 MediaTek Inc.
 */

/dts-v1/;
#include <dt-bindings/clock/mt6833-clk.h>
#include <dt-bindings/interrupt-controller/arm-gic.h>
#include <dt-bindings/interrupt-controller/irq.h>
#include <dt-bindings/spmi/spmi.h>
#include <dt-bindings/pinctrl/mt6833-pinfunc.h>
#include <dt-bindings/power/mt6833-power.h>
#include <dt-bindings/soc/mediatek,boot-mode.h>
#include <dt-bindings/phy/phy.h>


/ {
	model = "MT6833";
	compatible = "mediatek,MT6833";
	interrupt-parent = <&gic>;
	#address-cells = <2>;
	#size-cells = <2>;

	aliases {
		i2c0 = &i2c0;
		i2c1 = &i2c1;
		i2c2 = &i2c2;
		i2c3 = &i2c3;
		i2c4 = &i2c4;
		i2c5 = &i2c5;
		i2c6 = &i2c6;
		i2c7 = &i2c7;
		i2c8 = &i2c8;
		i2c9 = &i2c9;
	};

	/* chosen */
	chosen: chosen {
		bootargs = "console=tty0 console=ttyS0,921600n1 root=/dev/ram \
			earlycon=uart8250,mmio32,0x11002000 \
			vmalloc=400M slub_debug=OFZPU swiotlb=noforce \
			firmware_class.path=/vendor/firmware \
			androidboot.hardware=mt6833 \
			page_owner=on";
	};

	clkitg: clkitg {
		compatible = "simple-bus";
	};

	disable_unused: disable_unused {
		compatible = "simple-bus";
	};

	clocks {
		clk32k: clk32k {
			compatible = "fixed-clock";
			#clock-cells = <0>;
			clock-frequency = <32000>;
		};
		clk26m: clk26m {
			compatible = "fixed-clock";
			#clock-cells = <0>;
			clock-frequency = <26000000>;
		};
		clk13m: clk13m {
			compatible = "fixed-clock";
			#clock-cells = <0>;
			clock-frequency = <13000000>;
		};
		ulposc: ulposc {
			compatible = "fixed-clock";
			#clock-cells = <0>;
			clock-frequency = <260000000>;
		};
	};

	cpus {
	};

	memory {
		device_type = "memory";
		reg = <0 0x40000000 0 0x3e605000>;
	};

	reserved_memory: reserved-memory {
		#address-cells = <2>;
		#size-cells = <2>;
		ranges;
	};

	gic: interrupt-controller {
		compatible = "arm,gic-v3";
		#interrupt-cells = <3>;
		#address-cells = <2>;
		#size-cells = <2>;
		#redistributor-regions = <1>;
		interrupt-parent = <&gic>;
		interrupt-controller;
		reg = <0 0x0c000000 0 0x40000>, // distributor
		      <0 0x0c040000 0 0x200000>; // redistributor
		interrupts = <GIC_PPI 9 IRQ_TYPE_LEVEL_HIGH>;
	};

	timer: timer {
		compatible = "arm,armv8-timer";
		interrupt-parent = <&gic>;
		interrupts = <GIC_PPI 13 IRQ_TYPE_LEVEL_HIGH>,
			<GIC_PPI 14 IRQ_TYPE_LEVEL_HIGH>,
			<GIC_PPI 11 IRQ_TYPE_LEVEL_HIGH>,
			<GIC_PPI 10 IRQ_TYPE_LEVEL_HIGH>;
		clock-frequency = <13000000>;
	};

	topckgen_clk: syscon@10000000 {
		compatible = "mediatek,mt6833-topckgen", "syscon";
		reg = <0 0x10000000 0 0x1000>;
		#clock-cells = <1>;
	};

	infracfg_ao_clk: syscon@10001000 {
		compatible = "mediatek,mt6833-infracfg_ao", "syscon";
		reg = <0 0x10001000 0 0x1000>;
		#clock-cells = <1>;
	};

	sleep_sram@1001e000 {
		compatible = "mediatek,sleep_sram";
		reg = <0 0x1001e000 0 0x4000>;
	};

	pericfg_clk: syscon@10003000 {
		compatible = "mediatek,mt6833-pericfg", "syscon";
		reg = <0 0x10003000 0 0x1000>;
		#clock-cells = <1>;
	};

	scpsys: power-controller@10006000 {
		compatible = "mediatek,mt6833-scpsys", "syscon";
		reg = <0 0x10006000 0 0x1000>;
		#power-domain-cells = <1>;
		infracfg = <&infracfg_ao_clk>;
	};

	apmixedsys_clk: syscon@1000C000 {
		compatible = "mediatek,mt6833-apmixedsys", "syscon";
		reg = <0 0x1000C000 0 0x1000>;
		#clock-cells = <1>;
	};

	dsi_te: dsi_te {
		compatible = "mediatek, dsi_te-eint";
		status = "disabled";
	};

	kd_camera_hw1:kd_camera_hw1@1a004000 {
		compatible = "mediatek,imgsensor";
	};

	subpmic_pmu_eint:subpmic_pmu_eint {
	};

	auxadc: auxadc@11001000 {
		compatible = "mediatek,mt6768-auxadc";
		reg = <0 0x11001000 0 0x1000>;
		interrupts = <GIC_SPI 64 IRQ_TYPE_EDGE_RISING>;
		clocks = <&infracfg_ao_clk CLK_IFRAO_AUXADC>;
		clock-names = "main";
		#io-channel-cells = <1>;
		/* Auxadc efuse calibration */
		/* 1. Auxadc cali on/off bit shift */
		mediatek,cali-en-bit = <20>;
		/* 2. Auxadc cali ge bits shift */
		mediatek,cali-ge-bit = <10>;
		/* 3. Auxadc cali oe bits shift */
		mediatek,cali-oe-bit = <0>;
		/* 4. Auxadc cali efuse index */
		mediatek,cali-efuse-index = <113>;
	};

	gpio: gpio@10005000 {
		compatible = "mediatek,gpio";
		reg = <0 0x10005000 0 0x1000>;
	};

	iocfg_rb: iocfg_rb@11c30000 {
		compatible = "mediatek,iocfg_rb";
		reg = <0 0x11c30000 0 0x1000>;
	};

	iocfg_bm: iocfg_bm@11d10000 {
		compatible = "mediatek,iocfg_bm";
		reg = <0 0x11d10000 0 0x1000>;
	};

	iocfg_br: iocfg_br@11d40000 {
		compatible = "mediatek,iocfg_br";
		reg = <0 0x11d40000 0 0x1000>;
	};

	iocfg_lm: iocfg_lm@11e20000 {
		compatible = "mediatek,iocfg_lm";
		reg = <0 0x11e20000 0 0x1000>;
	};

	iocfg_bl: iocfg_bl@11e60000 {
		compatible = "mediatek,iocfg_bl";
		reg = <0 0x11e60000 0 0x1000>;
	};

	iocfg_rt: iocfg_rt@11ea0000 {
		compatible = "mediatek,iocfg_rt";
		reg = <0 0x11ea0000 0 0x1000>;
	};

	pio: pinctrl {
		compatible = "mediatek,mt6833-pinctrl";
		reg = <0 0x10005000 0 0x1000>,
		      <0 0x11c30000 0 0x1000>,
		      <0 0x11d10000 0 0x1000>,
		      <0 0x11d40000 0 0x1000>,
		      <0 0x11e20000 0 0x1000>,
		      <0 0x11e60000 0 0x1000>,
		      <0 0x11ea0000 0 0x1000>;
		reg-names = "gpio",
			    "iocfg_rb",
			    "iocfg_bm",
			    "iocfg_br",
			    "iocfg_lm",
			    "iocfg_bl",
			    "iocfg_rt";
		gpio-controller;
		gpio-ranges = <&pio 0 0 201>;
		#gpio-cells = <2>;
		interrupt-controller;
		#interrupt-cells = <2>;
	};

	keypad:kp@10010000 {
		compatible = "mediatek,kp";
		reg = <0 0x10010000 0 0x1000>;
		interrupts = <GIC_SPI 74 IRQ_TYPE_EDGE_RISING>;
		mediatek,key-debounce-ms = <1024>;
		mediatek,hw-map-num = <72>;
		mediatek,hw-init-map = <114 0 0 0 0 0 0 0 0 0 0 0 0
					0 0 0 0 0 0 0 0 0 0 0 0 0 0
					0 0 0 0 0 0 0 0 0 0 0 0 0 0
					0 0 0 0 0 0 0 0 0 0 0 0 0 0
					0 0 0 0 0 0 0 0 0 0 0 0 0 0
					0 0 0>;
		clocks = <&clk26m>;
		clock-names = "kpd";
	};

	md_auxadc:md_auxadc {
		compatible = "mediatek,md_auxadc";
		io-channels = <&auxadc 2>;
		io-channel-names = "md-channel";
	};

	gpio_usage_mapping:gpio_usage_mapping {
		compatible = "mediatek,gpio_usage_mapping";
	};

	md1_sim1_hot_plug_eint:md1_sim1_hot_plug_eint {
	};

	md1_sim2_hot_plug_eint:md1_sim2_hot_plug_eint {
	};

	watchdog: watchdog@10007000 {
		compatible = "mediatek,mt6833-wdt",
				"mediatek,mt6589-wdt",
				"syscon", "simple-mfd";
		mediatek,rg_dfd_timeout = <0xea60>;
		reg = <0 0x10007000 0 0x100>;
		reboot-mode {
			compatible = "syscon-reboot-mode";
			offset = <0x24>;
			mask = <0xf>;
			mode-charger = <BOOT_CHARGER>;
			mode-recovery = <BOOT_RECOVERY>;
			mode-bootloader = <BOOT_BOOTLOADER>;
			mode-dm-verity-dev-corrupt = <BOOT_DM_VERITY>;
			mode-kpoc = <BOOT_KPOC>;
			mode-ddr-reserve = <BOOT_DDR_RSVD>;
			mode-meta = <BOOT_META>;
			mode-rpmbpk = <BOOT_RPMBPK>;
		};
	};

	systimer: systimer@10017000 {
		compatible = "mediatek,mt6833-timer",
				"mediatek,mt6765-timer";
		reg = <0 0x10017000 0 0x1000>;
		interrupts = <GIC_SPI 233 IRQ_TYPE_LEVEL_HIGH 0>;
		clocks = <&clk13m>;
	};

	apdma: dma-controller@10217a80 {
		compatible = "mediatek,mt6779-uart-dma";
		reg = <0 0x10217a80 0 0x80>,
			  <0 0x10217b00 0 0x80>,
			  <0 0x10217b80 0 0x80>,
			  <0 0x10217c00 0 0x80>;
		interrupts = <GIC_SPI 146 IRQ_TYPE_LEVEL_HIGH>,
				 <GIC_SPI 147 IRQ_TYPE_LEVEL_HIGH>,
				 <GIC_SPI 148 IRQ_TYPE_LEVEL_HIGH>,
				 <GIC_SPI 149 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&infracfg_ao_clk CLK_IFRAO_AP_DMA>;
		clock-names = "apdma";
		dma-requests = <4>;
		#dma-cells = <1>;
		dma-bits = <34>;
	};

	apuart0: serial@11002000 {
		compatible = "mediatek,mt6577-uart";
		reg = <0 0x11002000 0 0x1000>;
		interrupts = <GIC_SPI 109 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&clk26m>, <&infracfg_ao_clk CLK_IFRAO_UART0>;
			clock-names = "baud", "bus";
		dmas = <&apdma 0
				&apdma 1>;
		dma-names = "tx", "rx";
	};

	apuart1: serial@11003000 {
		compatible = "mediatek,mt6577-uart";
		reg = <0 0x11003000 0 0x1000>;
		interrupts = <GIC_SPI 110 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&clk26m>, <&infracfg_ao_clk CLK_IFRAO_UART1>;
			clock-names = "baud", "bus";
		dmas = <&apdma 2
				&apdma 3>;
		dma-names = "tx", "rx";
	};

	touch:touch {
		compatible = "goodix,touch";
	};

	ufshci: ufshci@11270000 {
		compatible = "mediatek,mt8183-ufshci";
		reg = <0 0x11270000 0 0x2300>;
		interrupts = <GIC_SPI 105 IRQ_TYPE_LEVEL_HIGH 0>;

	#if  0
		clocks =
			<&infracfg_ao CLK_IFRAO_UFS>,
			<&infracfg_ao CLK_IFRAO_UNIPRO_SYSCLK>,
			<&infracfg_ao CLK_IFRAO_UFS_MP_SAP_BCLK>,
			<&infracfg_ao CLK_IFRAO_AES>,
			<&topckgen CLK_TOP_AES_UFSFDE_SEL>,
			<&topckgen CLK_TOP_UNIVPLL_D6>,
			<&topckgen CLK_TOP_MAINPLL_D4>;
		clock-names =
			"ufs-clk",
			"ufs-unipro-clk",
			"ufs-mp-clk",
			"ufs-crypto-clk",
			"ufs-vendor-crypto-clk-mux",
			"ufs-vendor-crypto-normal-parent-clk",
			"ufs-vendor-crypto-perf-parent-clk";
		freq-table-hz =
			<0 0>,
			<0 0>,
			<0 0>,
			<0 0>,
			<0 0>,
			<0 0>,
			<0 0>;

		resets = <&infracfg_rst 2>, <&infracfg_rst 3>,
			 <&infracfg_rst 4>;
		reset-names = "hci_rst", "unipro_rst", "crypto_rst";

		mediatek,ufs-boost-crypt;
		dvfsrc-vcore-supply = <&dvfsrc_vcore>;
		boost-crypt-vcore-min = <600000>;
	#endif
		/* Reference clock control mode */
		/* SW mode: 0, Half-HW mode: 1, HW mode: 2 */
		mediatek,refclk_ctrl = <1>;
		mediatek,ufs-disable-ah8;
		bootmode = <&chosen>;
		mediatek,ufs-qos;
	};

	scp@10500000 {
		compatible = "mediatek,scp";
		status = "okay";
		reg = <0 0x10500000 0 0xc0000>, /* tcm */
		<0 0x10724000 0 0x1000>,	 /* cfg */
		<0 0x10721000 0 0x1000>,	 /* clk*/
		<0 0x10730000 0 0x3000>,	 /* cfg core0 */
		<0 0x10740000 0 0x1000>,	 /* cfg core1 */
		<0 0x10752000 0 0x1000>,	 /* bus tracker */
		<0 0x10760000 0 0x40000>,	 /* llc */
		<0 0x107a5000 0 0x4>,		 /* cfg_sec */
		<0 0x107fb000 0 0x100>,		 /* mbox0 base */
		<0 0x107fb100 0 0x4>,		 /* mbox0 set */
		<0 0x107fb10c 0 0x4>,		 /* mbox0 clr */
		<0 0x107a5020 0 0x4>,		 /* mbox0 init */
		<0 0x107fc000 0 0x100>,		 /* mbox1 base */
		<0 0x107fc100 0 0x4>,		 /* mbox1 set */
		<0 0x107fc10c 0 0x4>,		 /* mbox1 clr */
		<0 0x107a5024 0 0x4>,		 /* mbox1 init */
		<0 0x107fd000 0 0x100>,		 /* mbox2 base */
		<0 0x107fd100 0 0x4>,		 /* mbox2 set */
		<0 0x107fd10c 0 0x4>,		 /* mbox2 clr */
		<0 0x107a5028 0 0x4>,		 /* mbox2 init */
		<0 0x107fe000 0 0x100>,		 /* mbox3 base */
		<0 0x107fe100 0 0x4>,		 /* mbox3 set */
		<0 0x107fe10c 0 0x4>,		 /* mbox3 clr */
		<0 0x107a502c 0 0x4>,		 /* mbox3 init */
		<0 0x107ff000 0 0x100>,		 /* mbox4 base */
		<0 0x107ff100 0 0x4>,		 /* mbox4 set */
		<0 0x107ff10c 0 0x4>,		 /* mbox4 clr */
		<0 0x107a5030 0 0x4>;		 /* mbox4 init */

		reg-names = "scp_sram_base",
			"scp_cfgreg",
			"scp_clkreg",
			"scp_cfgreg_core0",
			"scp_cfgreg_core1",
			"scp_bus_tracker",
			"scp_l1creg",
			"scp_cfgreg_sec",
			"mbox0_base",
			"mbox0_set",
			"mbox0_clr",
			"mbox0_init",
			"mbox1_base",
			"mbox1_set",
			"mbox1_clr",
			"mbox1_init",
			"mbox2_base",
			"mbox2_set",
			"mbox2_clr",
			"mbox2_init",
			"mbox3_base",
			"mbox3_set",
			"mbox3_clr",
			"mbox3_init",
			"mbox4_base",
			"mbox4_set",
			"mbox4_clr",
			"mbox4_init";

		interrupts = <GIC_SPI 434 IRQ_TYPE_LEVEL_HIGH>,
			<GIC_SPI 435 IRQ_TYPE_LEVEL_HIGH>,
			<GIC_SPI 436 IRQ_TYPE_LEVEL_HIGH>,
			<GIC_SPI 437 IRQ_TYPE_LEVEL_HIGH>,
			<GIC_SPI 438 IRQ_TYPE_LEVEL_HIGH>,
			<GIC_SPI 439 IRQ_TYPE_LEVEL_HIGH>,
			<GIC_SPI 440 IRQ_TYPE_LEVEL_HIGH>;

		 interrupt-names = "ipc0",
			"ipc1",
			"mbox0",
			"mbox1",
			"mbox2",
			"mbox3",
			"mbox4";

		core_0 = "enable";
		scp_sramSize = <0x000c0000>;
	};

	imp_iic_wrap_c_clk: syscon@11007000 {
		compatible = "mediatek,mt6833-imp_iic_wrap_c", "syscon";
		reg = <0 0x11007000 0 0x1000>;
		#clock-cells = <1>;
	};

	afe_clk: syscon@11210000 {
		compatible = "mediatek,mt6833-afe", "syscon";
		reg = <0 0x11210000 0 0x1000>;
		#clock-cells = <1>;
	};

	imp_iic_wrap_e_clk: syscon@11CB1000 {
		compatible = "mediatek,mt6833-imp_iic_wrap_e", "syscon";
		reg = <0 0x11CB1000 0 0x1000>;
		#clock-cells = <1>;
	};

	imp_iic_wrap_s_clk: syscon@11D02000 {
		compatible = "mediatek,mt6833-imp_iic_wrap_s", "syscon";
		reg = <0 0x11D02000 0 0x1000>;
		#clock-cells = <1>;
	};

	imp_iic_wrap_ws_clk: syscon@11D23000 {
		compatible = "mediatek,mt6833-imp_iic_wrap_ws", "syscon";
		reg = <0 0x11D23000 0 0x1000>;
		#clock-cells = <1>;
	};

	imp_iic_wrap_w_clk: syscon@11E03000 {
		compatible = "mediatek,mt6833-imp_iic_wrap_w", "syscon";
		reg = <0 0x11E03000 0 0x1000>;
		#clock-cells = <1>;
	};

	imp_iic_wrap_n_clk: syscon@11F01000 {
		compatible = "mediatek,mt6833-imp_iic_wrap_n", "syscon";
		reg = <0 0x11F01000 0 0x1000>;
		#clock-cells = <1>;
	};

	mfg_top_config_clk: syscon@13fbf000 {
		compatible = "mediatek,mt6833-mfg", "syscon";
		reg = <0 0x13fbf000 0 0x1000>;
		#clock-cells = <1>;
	};

	dispsys_config_clk: syscon@14000000 {
		compatible = "mediatek,mt6833-mmsys", "syscon";
		reg = <0 0x14000000 0 0x1000>;
		#clock-cells = <1>;
	};

	imgsys1_clk: syscon@15020000 {
		compatible = "mediatek,mt6833-imgsys1", "syscon";
		reg = <0 0x15020000 0 0x1000>;
		#clock-cells = <1>;
	};

	imgsys2_clk: syscon@15820000 {
		compatible = "mediatek,mt6833-imgsys2", "syscon";
		reg = <0 0x15820000 0 0x1000>;
		#clock-cells = <1>;
	};

	vdec_gcon_base_clk: syscon@1602f000 {
		compatible = "mediatek,mt6833-vdec_gcon_base", "syscon";
		reg = <0 0x1602f000 0 0x1000>;
		#clock-cells = <1>;
	};

	venc_gcon_clk: syscon@17000000 {
		compatible = "mediatek,mt6833-vencsys", "syscon";
		reg = <0 0x17000000 0 0x1000>;
		#clock-cells = <1>;
	};

	camsys_main_clk: syscon@1a000000 {
		compatible = "mediatek,mt6833-camsys_main", "syscon";
		reg = <0 0x1a000000 0 0x1000>;
		#clock-cells = <1>;
	};

	camsys_rawa_clk: syscon@1a04f000 {
		compatible = "mediatek,mt6833-camsys_rawa", "syscon";
		reg = <0 0x1a04f000 0 0x1000>;
		#clock-cells = <1>;
	};

	camsys_rawb_clk: syscon@1a06f000 {
		compatible = "mediatek,mt6833-camsys_rawb", "syscon";
		reg = <0 0x1a06f000 0 0x1000>;
		#clock-cells = <1>;
	};

	ipesys_clk: syscon@1b000000 {
		compatible = "mediatek,mt6833-ipesys", "syscon";
		reg = <0 0x1b000000 0 0x1000>;
		#clock-cells = <1>;
	};

	mdpsys_config_clk: syscon@1f000000 {
		compatible = "mediatek,mt6833-mdpsys_config", "syscon";
		reg = <0 0x1f000000 0 0x1000>;
		#clock-cells = <1>;
	};

	i2c0: i2c@11e00000 {
		compatible = "mediatek,mt6873-i2c";
		reg = <0 0x11e00000 0 0x1000>,
			<0 0x10217080 0 0x80>;
		interrupts = <GIC_SPI 112 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&imp_iic_wrap_w_clk CLK_IMPW_I2C0_AP_CLOCK>,
				<&infracfg_ao_clk CLK_IFRAO_AP_DMA>;
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c1: i2c@11d20000 {
		compatible = "mediatek,mt6873-i2c";
		reg = <0 0x11d20000 0 0x1000>,
			<0 0x10217100 0 0x80>;
		interrupts = <GIC_SPI 113 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&imp_iic_wrap_ws_clk CLK_IMPWS_I2C1_AP_CLOCK>,
				<&infracfg_ao_clk CLK_IFRAO_AP_DMA>;
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c2: i2c@11d21000 {
		compatible = "mediatek,mt6873-i2c";
		reg = <0 0x11d21000 0 0x1000>,
			<0 0x10217180 0 0x180>;
		interrupts = <GIC_SPI 114 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&imp_iic_wrap_ws_clk CLK_IMPWS_I3C2_AP_CLOCK>,
				<&infracfg_ao_clk CLK_IFRAO_AP_DMA>;
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c3: i2c@11cb0000 {
		compatible = "mediatek,mt6873-i2c";
		reg = <0 0x11cb0000 0 0x1000>,
			<0 0x10217300 0 0x80>;
		interrupts = <GIC_SPI 115 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&imp_iic_wrap_e_clk CLK_IMPE_I2C3_AP_CLOCK>,
				<&infracfg_ao_clk CLK_IFRAO_AP_DMA>;
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c4: i2c@11d22000 {
		compatible = "mediatek,mt6873-i2c";
		reg = <0 0x11d22000 0 0x1000>,
			<0 0x10217380 0 0x180>;
		interrupts = <GIC_SPI 116 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&imp_iic_wrap_ws_clk CLK_IMPWS_I3C4_AP_CLOCK>,
				<&infracfg_ao_clk CLK_IFRAO_AP_DMA>;
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c5: i2c@11e01000 {
		compatible = "mediatek,mt6873-i2c";
		reg = <0 0x11e01000 0 0x1000>,
			<0 0x10217500 0 0x80>;
		interrupts = <GIC_SPI 117 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&imp_iic_wrap_w_clk CLK_IMPW_I2C5_AP_CLOCK>,
				<&infracfg_ao_clk CLK_IFRAO_AP_DMA>;
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c6: i2c@11f00000 {
		compatible = "mediatek,mt6873-i2c";
		reg = <0 0x11f00000 0 0x1000>,
			<0 0x10217580 0 0x80>;
		interrupts = <GIC_SPI 118 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&imp_iic_wrap_n_clk CLK_IMPN_I2C6_AP_CLOCK>,
				<&infracfg_ao_clk CLK_IFRAO_AP_DMA>;
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c7: i2c@11e02000 {
		compatible = "mediatek,mt6873-i2c";
		reg = <0 0x11e02000 0 0x1000>,
			<0 0x10217600 0 0x180>;
		interrupts = <GIC_SPI 119 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&imp_iic_wrap_w_clk CLK_IMPW_I3C7_AP_CLOCK>,
				<&infracfg_ao_clk CLK_IFRAO_AP_DMA>;
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c8: i2c@11d00000 {
		compatible = "mediatek,mt6873-i2c";
		reg = <0 0x11d00000 0 0x1000>,
			<0 0x10217780 0 0x180>;
		interrupts = <GIC_SPI 120 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&imp_iic_wrap_s_clk CLK_IMPS_I3C8_AP_CLOCK>,
				<&infracfg_ao_clk CLK_IFRAO_AP_DMA>;
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c9: i2c@11d01000 {
		compatible = "mediatek,mt6873-i2c";
		reg = <0 0x11d01000 0 0x1000>,
			<0 0x10217900 0 0x180>;
		interrupts = <GIC_SPI 121 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&imp_iic_wrap_s_clk CLK_IMPS_I3C9_AP_CLOCK>,
				<&infracfg_ao_clk CLK_IFRAO_AP_DMA>;
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	pmic_clock_buffer_ctrl:pmic_clock_buffer_ctrl {
		compatible = "mediatek,pmic_clock_buffer";
		mediatek,clkbuf-quantity = <7>;
		mediatek,clkbuf-config = <2 1 1 2 0 0 1>;
		mediatek,clkbuf-output_impedance = <6 4 4 4 0 0 4>;
		mediatek,clkbuf-controls-for-desense = <0 4 0 4 0 0 0>;
		tcxo_support = "false";
	};

	mrdump_ext_rst: mrdump_ext_rst {
		compatible = "mediatek, mrdump_ext_rst-eint";
		mode = "IRQ";
		status = "okay";
	};

	odm: odm {
		compatible = "simple-bus";
		/* reserved for overlay by odm */
	};

	clock_buffer_ctrl: clock_buffer_ctrl {
	};

	pwrap: pwrap@10026000 {
		compatible = "mediatek,mt6833-pwrap";
		reg = <0 0x10026000 0 0x1000>;
		reg-names = "pwrap";
		interrupts = <GIC_SPI 220 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&infracfg_ao_clk CLK_IFRAO_PMIC_AP>,
			 <&infracfg_ao_clk CLK_IFRAO_PMIC_TMR>,
			 <&topckgen_clk CLK_TOP_PWRAP_ULPOSC_SEL>,
			 <&topckgen_clk CLK_TOP_OSC_D10>;
		clock-names = "spi", "wrap", "ulposc", "ulposc_osc";
	};

	pwraph: pwraphal@10026000 {
		compatible = "mediatek,pwraph";
		mediatek,pwrap-regmap = <&pwrap>;
	};

	pwrap_mpu@10026000 {
		compatible = "mediatek,pwrap_mpu";
		reg = <0 0x10026000 0 0x1000>;
	};

	spmi: spmi@10027000 {
		compatible = "mediatek,mt6833-spmi";
		reg = <0 0x10027000 0 0x0008ff>,
		      <0 0x10027900 0 0x000500>,
		      <0 0x10029000 0 0x000100>;
		reg-names = "pmif", "pmifmpu", "spmimst";
		interrupts = <GIC_SPI 221 IRQ_TYPE_LEVEL_HIGH>;
		interrupt-names = "pmif_irq";
		irq_event_en = <0x0 0x0 0x0 0x0 0x0>;
		clocks = <&infracfg_ao_clk CLK_IFRAO_PMIC_AP>,
			<&infracfg_ao_clk CLK_IFRAO_PMIC_TMR>,
			<&topckgen_clk CLK_TOP_PWRAP_ULPOSC_SEL>,
			<&topckgen_clk CLK_TOP_OSC_D10>,
			<&topckgen_clk CLK_TOP_TCK_26M_MX9>,
			<&topckgen_clk CLK_TOP_SPMI_MST_SEL>,
			<&topckgen_clk CLK_TOP_TCK_26M_MX9>,
			<&topckgen_clk CLK_TOP_OSC_D10>;
		clock-names = "pmif_sys_ck",
			"pmif_tmr_ck",
			"pmif_clk_mux",
			"pmif_clk_osc_d10",
			"pmif_clk26m",
			"spmimst_clk_mux",
			"spmimst_clk26m",
			"spmimst_clk_osc_d10";
		swinf_ch_start = <4>;
		ap_swinf_no = <2>;
		#address-cells = <2>;
		#size-cells = <0>;
	};

	extcon_usb: extcon_usb {
		compatible = "mediatek,extcon-usb";
		/*vbus-supply = <&mt6375_otg_vbus>;*/
		vbus-voltage = <5000000>;
		vbus-current = <1800000>;
		/*charger = <&mt6375_chg>;*/
		tcpc = "type_c_port0";
		mediatek,bypss-typec-sink = <1>;
		port {
			usb_role: endpoint@0 {
				remote-endpoint = <&musb_drd_switch>;
			};
		};
	};

	usb: usb0@0x11200000 {
		compatible = "mediatek,mt6833-usb20";
		reg = <0 0x11200000 0 0x10000>,
			<0 0x11e40000 0 0x10000>;
		interrupts = <GIC_SPI 96 IRQ_TYPE_LEVEL_HIGH  0>;
		clocks = <&topckgen_clk CLK_TOP_USB_TOP_SEL>,
			<&topckgen_clk CLK_TOP_UNIVPLL_D5_D4>,
			<&apmixedsys_clk CLK_APMIXED_USBPLL>;
		clock-names = "sys_clk",
			"ref_clk",
			"src_ref";
		phys = <&u2port0 PHY_TYPE_USB2>;
		mode = <2>;
		multipoint = <1>;
		num_eps = <16>;
		interrupt-names = "mc";
		dr_mode = "otg";
		usb-role-switch;
		port {
			musb_drd_switch: endpoint@0 {
				remote-endpoint = <&usb_role>;
			};
		};
	};

	u2phy0: usb-phy@11e40000 {
		compatible = "mediatek,generic-tphy-v2";
		/* reg = <0 0x11e40000 0 0x0300>; */
		#address-cells = <2>;
		#size-cells = <2>;
		ranges;
		status = "okay";
		u2port0: usb-phy@11e40000 {
			reg = <0 0x11e40000 0 0x700>;
			clocks = <&clk26m>;
			clock-names = "ref";
			#phy-cells = <1>;
			status = "okay";
		};
	};

	lk_charger: lk_charger {
		compatible = "mediatek,lk_charger";
		enable_anime;
		/* enable_pe_plus; */
		enable_pd20_reset;
		power_path_support;
		max_charger_voltage = <6500000>;
		fast_charge_voltage = <3000000>;

		/* charging current */
		usb_charger_current = <500000>;
		ac_charger_current = <2050000>;
		ac_charger_input_current = <3200000>;
		non_std_ac_charger_current = <500000>;
		charging_host_charger_current = <1500000>;
		ta_ac_charger_current = <3000000>;
		pd_charger_current = <500000>;

		/* battery temperature protection */
		temp_t4_threshold = <50>;
		temp_t3_threshold = <45>;
		temp_t1_threshold = <0>;
	};

	pe: pe {
		compatible = "mediatek,charger,pe";
		gauge = <&mtk_gauge>;

		ta_12v_support;
		ta_9v_support;

		pe_ichg_level_threshold = <1000000>; /* uA */
		ta_start_battery_soc = <0>;
		ta_stop_battery_soc = <85>;
		min_charger_voltage = <4600000>;

		ta_ac_12v_input_current = <3200000>;
		ta_ac_9v_input_current = <3200000>;
		ta_ac_7v_input_current = <3200000>;
		pe_charger_current = <3000000>;
		vbat_threshold = <4150>;
	};

	pe2: pe2 {
		compatible = "mediatek,charger,pe2";
		gauge = <&mtk_gauge>;

		/* PE 2.0 */
		pe20_ichg_level_threshold = <1000000>; /* uA */
		ta_start_battery_soc = <0>;
		ta_stop_battery_soc = <85>;
		min_charger_voltage = <4600000>;

		/* cable measurement impedance */
		cable_imp_threshold = <699>;
		vbat_cable_imp_threshold = <3900000>; /* uV */

		/* single charger */
		sc_input_current = <3200000>;
		sc_charger_current = <3000000>;

		/* dual charger in series*/
		dcs_input_current = <3200000>;
		dcs_chg1_charger_current = <1500000>;
		dcs_chg2_charger_current = <1500000>;

		dual_polling_ieoc = <450000>;
		slave_mivr_diff = <100000>;
		vbat_threshold = <4150>;
	};

	pdc: pdc {
		compatible = "mediatek,charger,pd";
		gauge = <&mtk_gauge>;

		min_charger_voltage = <4600000>;
		pd_vbus_low_bound = <5000000>;
		pd_vbus_upper_bound = <5000000>;
		vsys_watt = <5000000>;
		ibus_err = <14>;

		pd_stop_battery_soc = <80>;

		/* single charger */
		sc_input_current = <3200000>;
		sc_charger_current = <3000000>;

		/* dual charger in series*/
		dcs_input_current = <3200000>;
		dcs_chg1_charger_current = <1500000>;
		dcs_chg2_charger_current = <1500000>;

		/* dual charger */
		dual_polling_ieoc = <450000>;
		slave_mivr_diff = <100000>;
		vbat_threshold = <4150>;
	};

	pe4: pe4 {
		compatible = "mediatek,charger,pe4";
		gauge = <&mtk_gauge>;

		min_charger_voltage = <4600000>;
		pe40_stop_battery_soc = <80>;

		high_temp_to_leave_pe40 = <46>;
		high_temp_to_enter_pe40 = <39>;
		low_temp_to_leave_pe40 = <10>;
		low_temp_to_enter_pe40 = <16>;
		ibus_err = <14>;

		/* PE 4.0 cable impedance (mohm) */
		pe40_r_cable_1a_lower = <500>;
		pe40_r_cable_2a_lower = <351>;
		pe40_r_cable_3a_lower = <240>;

		/* single charger */
		sc_input_current = <3200000>;
		sc_charger_current = <3000000>;

		/* dual charger in series*/
		dcs_input_current = <3200000>;
		dcs_chg1_charger_current = <1500000>;
		dcs_chg2_charger_current = <1500000>;

		dual_polling_ieoc = <450000>;
		slave_mivr_diff = <100000>;
		vbat_threshold = <4150>;
	};

	charger: charger {
		compatible = "mediatek,charger";
		gauge = <&mtk_gauge>;
		charger = <&mt6360_chg>;
		bootmode = <&chosen>;
		pmic = <&pmic>;

		algorithm_name = "Basic";
		charger_configuration= <0>;

		/* common */
		battery_cv = <4350000>;
		max_charger_voltage = <6500000>;
		min_charger_voltage = <4600000>;

		/* sw jeita */
		/* enable_sw_jeita; */
		jeita_temp_above_t4_cv = <4240000>;
		jeita_temp_t3_to_t4_cv = <4240000>;
		jeita_temp_t2_to_t3_cv = <4340000>;
		jeita_temp_t1_to_t2_cv = <4240000>;
		jeita_temp_t0_to_t1_cv = <4040000>;
		jeita_temp_below_t0_cv = <4040000>;
		temp_t4_thres = <50>;
		temp_t4_thres_minus_x_degree = <47>;
		temp_t3_thres = <45>;
		temp_t3_thres_minus_x_degree = <39>;
		temp_t2_thres = <10>;
		temp_t2_thres_plus_x_degree = <16>;
		temp_t1_thres = <0>;
		temp_t1_thres_plus_x_degree = <6>;
		temp_t0_thres = <0>;
		temp_t0_thres_plus_x_degree = <0>;
		temp_neg_10_thres = <0>;

		/* battery temperature protection */
		enable_min_charge_temp;
		min_charge_temp = <0>;
		min_charge_temp_plus_x_degree = <6>;
		max_charge_temp = <50>;
		max_charge_temp_minus_x_degree = <47>;

		/* charging current */
		usb_charger_current = <500000>;
		ac_charger_current = <2050000>;
		ac_charger_input_current = <3200000>;
		charging_host_charger_current = <1500000>;

		/* dynamic mivr */
		enable_dynamic_mivr;
		min_charger_voltage_1 = <4400000>;
		min_charger_voltage_2 = <4200000>;
		max_dmivr_charger_current = <1800000>;

		/* fast charging algo support indicator */
		enable_fast_charging_indicator;
	};
};

#include "mediatek/mt6833-clkitg.dtsi"
#include "mediatek/mt6833-disable-unused.dtsi"
#include "mediatek/mt6359p.dtsi"

&i2c5 {
	status = "okay";
	clock-frequency = <3400000>;
	#address-cells = <1>;
	#size-cells = <0>;

	subpmic_mtk: mt6360_pmu@34 {
		#interrupt-cells = <2>;
		status = "ok";
		compatible = "mediatek,mt6360_pmu";
		reg = <0x34>;
		wakeup-source;
		interrupt-controller;
		interrupt-parent = <&pio>;
		interrupts = <10 IRQ_TYPE_EDGE_FALLING>;
		interrupt-names = "IRQB";
		mt6360_chg: chg {
			compatible = "mediatek,mt6360_chg";
			vinovp = <14500000>;
			io-channels = <&mt6360_adc 0>, <&mt6360_adc 1>,
				      <&mt6360_adc 3>, <&mt6360_adc 4>,
				      <&mt6360_adc 5>, <&mt6360_adc 6>,
				      <&mt6360_adc 8>, <&mt6360_adc 10>;
			io-channel-names = "USBID", "VBUSDIV5", "VSYS", "VBAT",
					   "IBUS", "IBAT", "TEMP_JC", "TS";
			chg_name = "primary_chg";
			ichg = <2000000>;		/* uA */
			aicr = <500000>;		/* uA */
			mivr = <4400000>;		/* uV */
			cv = <4350000>;			/* uA */
			ieoc = <150000>;		/* uA */
			safety_timer = <12>;		/* hour */
			ircmp_resistor = <25000>;	/* uohm */
			ircmp_vclamp = <32000>;		/* uV */
			en_te = <1>;
			en_wdt = <1>;
			aicc_once = <1>;
			post_aicc = <1>;
			batoc_notify = <0>;
			charger = <&mt6360_chg>;
			//phys = <&u2port0 PHY_TYPE_USB2>;
			//phy-names = "usb2-phy";
			//usb = <&ssusb>;
			//bc12_ref = <&mtk_ctd>;
			otg_vbus: usb-otg-vbus {
				regulator-compatible = "usb-otg-vbus";
				regulator-name = "usb-otg-vbus";
				regulator-min-microvolt = <4425000>;
				regulator-max-microvolt = <5825000>;
				regulator-min-microamp = <500000>;
				regulator-max-microamp = <3000000>;
			};
		};
		mt6360_adc: adc {
			compatible = "mediatek,mt6360_adc";
			#io-channel-cells = <1>;
		};
		mt6360_led: led {
			compatible = "mediatek,mt6360_led";
			rgbon_sync = <1>;
			iled  {
				#address-cells = <1>;
				#size-cells = <0>;
				led@0 {
					reg = <0>;
					label = "isink1";
				};
				led@1 {
					reg = <1>;
					label = "isink2";
				};
				led@2 {
					reg = <2>;
					label = "isink3";
				};
				led@3 {
					reg = <3>;
					label = "isink4";
				};
			};
			fled {
				#address-cells = <1>;
				#size-cells = <0>;
				flash@0 {
					reg = <0>;
					label = "mt6360_flash_ch1";
					led-max-microamp = <400000>;
					flash-max-microamp = <1500000>;
					flash-max-timeout = <1248000>;
					type = <0>;
					ct = <0>;
					part = <0>;
				};
				flash@1 {
					reg = <1>;
					label = "mt6360_flash_ch2";
					led-max-microamp = <400000>;
					flash-max-microamp = <1500000>;
					flash-max-timeout = <1248000>;
					type = <0>;
					ct = <1>;
					part = <0>;
				};
			};
		};
		pmic {
			compatible = "mediatek,mt6360_pmic";
			mt6360_mdla_buck_reg: buck1 {
				regulator-compatible = "BUCK1";
				regulator-name = "mt6360,buck1";
				regulator-min-microvolt = <300000>;
				regulator-max-microvolt = <1300000>;
				regulator-allowed-modes = <0 2 3>;
				regulator-always-on;
			};
			buck2 {
				regulator-compatible = "BUCK2";
				regulator-name = "mt6360,buck2";
				regulator-min-microvolt = <300000>;
				regulator-max-microvolt = <1300000>;
				regulator-allowed-modes = <0 2 3>;
			};
			ldo6 {
				regulator-compatible = "LDO6";
				regulator-name = "mt6360,ldo6";
				regulator-min-microvolt = <500000>;
				regulator-max-microvolt = <2100000>;
				regulator-allowed-modes = <0 2>;
				regulator-always-on;
			};
			ldo7 {
				regulator-compatible = "LDO7";
				regulator-name = "mt6360,ldo7";
				regulator-min-microvolt = <500000>;
				regulator-max-microvolt = <2100000>;
				regulator-allowed-modes = <0 2>;
				regulator-always-on;
			};
		};
		ldo {
			compatible = "mediatek,mt6360_ldo";
			mt_pmic_vfp_ldo_reg: ldo1 {
				regulator-compatible = "LDO1";
				regulator-name = "mt6360,ldo1";
				regulator-min-microvolt = <1200000>;
				regulator-max-microvolt = <3600000>;
				regulator-allowed-modes = <0 2>;
			};
			mt_pmic_vtp_ldo_reg: ldo2 {
				regulator-compatible = "LDO2";
				regulator-name = "vtp";
				regulator-min-microvolt = <1200000>;
				regulator-max-microvolt = <3600000>;
				regulator-allowed-modes = <0 2>;
			};
			mt_pmic_vmc_ldo_reg: ldo3 {
				regulator-compatible = "LDO3";
				regulator-name = "mt6360,ldo3";
				regulator-min-microvolt = <1200000>;
				regulator-max-microvolt = <3600000>;
				regulator-allowed-modes = <0 2>;
			};
			mt_pmic_vmch_ldo_reg: ldo5 {
				regulator-compatible = "LDO5";
				regulator-name = "mt6360,ldo5";
				regulator-min-microvolt = <2700000>;
				regulator-max-microvolt = <3600000>;
				regulator-allowed-modes = <0 2>;
			};
		};
	};
};

&pmic {
	interrupt-parent = <&pio>;
	interrupts = <118 IRQ_TYPE_LEVEL_HIGH 118 0>;

	mt6359p_batoc_throttle: mtk_battery_oc_throttling {
		compatible = "mediatek,mt6359p-battery_oc_throttling";
		oc-thd-h = <6800>;
		oc-thd-l = <8000>;
	};
};

&mt6359p_vsram_others_reg {
	regulator-always-on;
};

&mt6359p_vsram_md_reg {
	regulator-always-on;
};

&mt6359p_vgpu11_reg {
	regulator-always-on;
};

&mt6359p_vcore_reg {
	regulator-always-on;
};

&mt6359p_vpu_reg {
	regulator-always-on;
};

&mt6359p_vrf12_reg {
	regulator-always-on;
};

&mt6359p_va09_reg {
	regulator-always-on;
};

&mt6359p_vbbck_reg {
	regulator-always-on;
};

&mt6359p_vrfck_reg {
	regulator-always-on;
};

&mt6359p_vemc_reg {
	regulator-always-on;
};

&mt6359p_vufs_reg {
	regulator-always-on;
};

&mt6359p_vproc1_reg {
	regulator-always-on;
};

&mt6359p_vproc2_reg {
	regulator-always-on;
};

&mtk_gauge {
	charger = <&mt6360_chg>;
};
#include "mediatek/bat_setting/mt6833_battery_prop.dtsi"

&spmi {
	mt6315_3: mt6315@3 {
		compatible = "mediatek,mt6315", "mtk,spmi-pmic";
		reg = <0x3 0 0xb 1>;

		extbuck_debug {
			compatible = "mediatek,extbuck-debug";
		};
		mt6315_3_regulator: mt6315_3_regulator {
			compatible = "mediatek,mt6315_3-regulator";
			buck-size = <3>;
			buck1-modeset-mask = <0x3>;

			mt6315_3_vbuck1: 3_vbuck1 {
				regulator-compatible = "vbuck1";
				regulator-name = "3_vbuck1";
				regulator-min-microvolt = <300000>;
				regulator-max-microvolt = <1193750>;
				regulator-enable-ramp-delay = <256>;
				regulator-allowed-modes = <0 1 2>;
				regulator-always-on;
			};

			mt6315_3_vbuck3: 3_vbuck3 {
				regulator-compatible = "vbuck3";
				regulator-name = "3_vbuck3";
				regulator-min-microvolt = <300000>;
				regulator-max-microvolt = <1193750>;
				regulator-enable-ramp-delay = <256>;
				regulator-allowed-modes = <0 1 2>;
				regulator-always-on;
			};

			mt6315_3_vbuck4: 3_vbuck4 {
				regulator-compatible = "vbuck4";
				regulator-name = "3_vbuck4";
				regulator-min-microvolt = <300000>;
				regulator-max-microvolt = <1193750>;
				regulator-enable-ramp-delay = <256>;
				regulator-allowed-modes = <0 1 2>;
				regulator-always-on;
			};
		};
	};
};
